"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9948],{44993:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>m});var o=t(52983);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)t=l[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)t=l[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=o.createContext({}),p=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=p(e.components);return o.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},u=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=p(t),m=a,b=u["".concat(s,".").concat(m)]||u[m]||c[m]||l;return t?o.createElement(b,r(r({ref:n},d),{},{components:t})):o.createElement(b,r({ref:n},d))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,r=new Array(l);r[0]=u;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,r[1]=i;for(var p=2;p<l;p++)r[p]=t[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}u.displayName="MDXCreateElement"},30662:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var o=t(18249),a=(t(52983),t(44993));const l={toc:[{value:"Function Type",id:"function-type",level:3},{value:"Object Type",id:"object-type",level:3},{value:"Util Functions",id:"util-functions",level:3},{value:"addPlugins",id:"addplugins",level:4},{value:"addPresets",id:"addpresets",level:4},{value:"removePlugins",id:"removeplugins",level:4},{value:"removePresets",id:"removepresets",level:4},{value:"addIncludes",id:"addincludes",level:4},{value:"addExcludes",id:"addexcludes",level:4},{value:"modifyPresetEnvOptions",id:"modifypresetenvoptions",level:4},{value:"modifyPresetReactOptions",id:"modifypresetreactoptions",level:4}]};function r(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,o.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Type: ",(0,a.kt)("inlineCode",{parentName:"li"},"Object | Function")),(0,a.kt)("li",{parentName:"ul"},"Default: ",(0,a.kt)("inlineCode",{parentName:"li"},"undefined"))),(0,a.kt)("p",null,"By ",(0,a.kt)("inlineCode",{parentName:"p"},"tools.babel")," you can modify the options of ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/babel/babel-loader"},"babel-loader"),"."),(0,a.kt)("h3",{id:"function-type"},"Function Type"),(0,a.kt)("p",null,"When ",(0,a.kt)("inlineCode",{parentName:"p"},"tools.babel"),"'s type is Function\uff0cthe default babel config will be passed in as the first parameter, the config object can be modified directly, or a value can be returned as the final result. The second parameter provides some util functions that can be called directly:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config) {\n      // Add a babel plugin\n      // note: the plugin have been added to the default config to support antd load on demand\n      config.plugins.push([\n        'babel-plugin-import',\n        {\n          libraryName: 'xxx-components',\n          libraryDirectory: 'es',\n          style: true,\n        },\n      ]);\n    },\n  },\n};\n")),(0,a.kt)("h3",{id:"object-type"},"Object Type"),(0,a.kt)("p",null,"When ",(0,a.kt)("inlineCode",{parentName:"p"},"tools.babel"),"'s type is ",(0,a.kt)("inlineCode",{parentName:"p"},"Object"),", the config will be merged with default config by ",(0,a.kt)("inlineCode",{parentName:"p"},"Object.assign"),". Note that ",(0,a.kt)("inlineCode",{parentName:"p"},"Object.assign")," is a shallow copy and will completely overwrite the built-in ",(0,a.kt)("inlineCode",{parentName:"p"},"presets")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"plugins")," array, please use it with caution."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel: {\n      plugins: [\n        [\n          'babel-plugin-import',\n          {\n            libraryName: 'xxx-components',\n            libraryDirectory: 'es',\n            style: true,\n          },\n        ],\n      ],\n    },\n  },\n};\n")),(0,a.kt)("h3",{id:"util-functions"},"Util Functions"),(0,a.kt)("p",null,"When ",(0,a.kt)("inlineCode",{parentName:"p"},"tools.babel")," is a Function, the tool functions available for the second parameter are as follows:"),(0,a.kt)("h4",{id:"addplugins"},"addPlugins"),(0,a.kt)("p",null,"Add Babel plugin. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { addPlugins }) {\n      addPlugins([\n        [\n          'babel-plugin-import',\n          {\n            libraryName: 'xxx-components',\n            libraryDirectory: 'es',\n            style: true,\n          },\n        ],\n      ]);\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"addpresets"},"addPresets"),(0,a.kt)("p",null,"Add Babel preset configuration. (No need to add presets in most cases)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { addPresets }) {\n      addPresets(['@babel/preset-env']);\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"removeplugins"},"removePlugins"),(0,a.kt)("p",null,"To remove the Babel plugin, just pass in the name of the plugin to be removed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { removePlugins }) {\n      removePlugins('babel-plugin-import');\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"removepresets"},"removePresets"),(0,a.kt)("p",null,"To remove the Babel preset configuration, pass in the name of the preset to be removed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { removePresets }) {\n      removePresets('@babel/preset-env');\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"addincludes"},"addIncludes"),(0,a.kt)("p",null,"By default, Babel will only compile the application code in the src directory. With addIncludes you can specify that Babel compile some files in node_modules. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { addIncludes }) {\n      addIncludes('node_modules/xxx-components');\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"addexcludes"},"addExcludes"),(0,a.kt)("p",null,"Contrary to ",(0,a.kt)("inlineCode",{parentName:"p"},"addIncludes"),", specifies that certain files are excluded from Babel's compilation."),(0,a.kt)("p",null,"For example, without compiling files in the ",(0,a.kt)("inlineCode",{parentName:"p"},"src/example")," directory:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { addExcludes }) {\n      addExcludes('src/example');\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"modifypresetenvoptions"},"modifyPresetEnvOptions"),(0,a.kt)("p",null,"Modify the configuration of ",(0,a.kt)("inlineCode",{parentName:"p"},"@babel/preset-env"),", the configuration you pass in will be shallowly merged with default config. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { modifyPresetEnvOptions }) {\n      modifyPresetEnvOptions({\n        targets: {\n          browsers: ['last 2 versions'],\n        },\n      });\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"modifypresetreactoptions"},"modifyPresetReactOptions"),(0,a.kt)("p",null,"Modify the configuration of ",(0,a.kt)("inlineCode",{parentName:"p"},"@babel/preset-react"),", the configuration you pass in will be shallowly merged with default config. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  tools: {\n    babel(config, { modifyPresetReactOptions }) {\n      modifyPresetReactOptions({\n        pragma: 'React.createElement',\n      });\n    },\n  },\n};\n")))}r.isMDXComponent=!0;const i={title:"tools.babel",sidebar_label:"babel"},s=void 0,p={unversionedId:"configure/app/tools/babel",id:"configure/app/tools/babel",title:"tools.babel",description:"This configuration is Modern.js Builder configuration, more detail can see tools.babel\u3002",source:"@site/../../packages/toolkit/main-doc/en/docusaurus-plugin-content-docs/current/configure/app/tools/babel.md",sourceDirName:"configure/app/tools",slug:"/configure/app/tools/babel",permalink:"/v2/en/docs/configure/app/tools/babel",draft:!1,tags:[],version:"current",frontMatter:{title:"tools.babel",sidebar_label:"babel"},sidebar:"configsAppSidebar",previous:{title:"autoprefixer",permalink:"/v2/en/docs/configure/app/tools/autoprefixer"},next:{title:"cssExtract",permalink:"/v2/en/docs/configure/app/tools/css-extract"}},d={},c=[],u={toc:c};function m(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{title:"BUILDER",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"This configuration is Modern.js Builder configuration, more detail can see ",(0,a.kt)("a",{parentName:"p",href:"https://modernjs.dev/builder/zh/api/config-tools.html#tools-babel"},"tools.babel"),"\u3002")),(0,a.kt)(r,{mdxType:"Main"}))}m.isMDXComponent=!0}}]);