<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title data-rh="true">Source Config</title><meta data-rh="true" name="description" content="一个面向 Web 开发场景的构建引擎"/><script>!function(){"use strict";var e,_,n,i,o,t,c,a={},f={};function r(e){var _=f[e];if(void 0!==_)return _.exports;var n=f[e]={exports:{}};return a[e].call(n.exports,n,n.exports,r),n.exports}r.m=a,e=[],r.O=function(_,n,i,o){if(!n){var t=1/0;for(s=0;s<e.length;s++){n=e[s][0],i=e[s][1],o=e[s][2];for(var c=!0,a=0;a<n.length;a++)(!1&o||t>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[a])}))?n.splice(a--,1):(c=!1,o<t&&(t=o));if(c){e.splice(s--,1);var f=i();void 0!==f&&(_=f)}}return _}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,i,o]},r.n=function(e){var _=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(_,{a:_}),_},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},r.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var o=Object.create(null);r.r(o);var t={};_=_||[null,n({}),n([]),n(n)];for(var c=2&i&&e;"object"==typeof c&&!~_.indexOf(c);c=n(c))Object.getOwnPropertyNames(c).forEach((function(_){t[_]=function(){return e[_]}}));return t.default=function(){return e},r.d(o,t),o},r.d=function(e,_){for(var n in _)r.o(_,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:_[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(_,n){return r.f[n](e,_),_}),[]))},r.u=function(e){return"static/js/async/"+({27:"en_guide_advanced_custom-webpack-config",44:"zh_config_tools_webpack",54:"zh_guide_basic_html-template",99:"zh_shared_onAfterBuild",163:"zh_config_html_mountId",195:"en_config_output_disableCssModuleExtension",207:"en_plugins_list",213:"zh_guide_optimization_split-chunk",234:"zh_config_tools_autoprefixer",285:"en_config_experiments_lazyCompilation",288:"zh_config_html_templateParameters",299:"zh_api_plugin-hooks",301:"en_config_source_compileJsDataURI",315:"en_index",461:"zh_config_output_enableCssModuleTSDeclaration",551:"en_guide_optimization_split-chunk",557:"zh_api_config-source",570:"zh_guide_advanced_hmr",583:"en_shared_onAfterCreateCompiler",591:"zh_config_output_cleanDistPath",613:"zh_api_config-experiments",652:"en_guide_basic_json-files",659:"en_api_config-source",707:"zh_guide_features",771:"en_config_tools_styleLoader",789:"zh_config_performance_chunkSplit",805:"en_config_output_legalComments",806:"en_config_html_templateByEntries",818:"zh_config_performance_buildCache",826:"en_config_tools_babel",901:"en_config_output_enableLatestDecorators",902:"en_config_html_metaByEntries",951:"zh_config_dev_port",1001:"zh_api_config-output",1085:"en_api_index",1108:"zh_config_html_templateByEntries",1164:"zh_config_output_disableFilenameHash",1167:"en_guide_basic_builder-config",1189:"zh_api_index",1320:"zh_config_html_injectByEntries",1387:"en_config_performance_chunkSplit",1436:"en_config_tools_sass",1447:"en_plugins_plugin-node-polyfill",1596:"en_config_tools_postcss",1655:"zh_api_config-tools",1677:"en_guide_basic_svg-assets",1680:"zh_shared_onAfterCreateCompiler",1722:"zh_guide_basic_build-target",1743:"en_config_source_resolveMainFields",1767:"zh_guide_basic_builder-config",1773:"en_config_output_disableSourceMap",1778:"zh_config_output_disableInlineRuntimeChunk",1780:"en_config_performance_printFileSize",1786:"zh_config_output_charset",1813:"zh_api_builder-instance",1816:"zh_guide_optimization_inline-assets",1895:"zh_index",1911:"en_guide_quick-start",1963:"zh_config_html_disableHtmlFolder",1969:"en_config_html_template",1989:"en_config_output_enableAssetManifest",1999:"zh_guide_debug_debug-mode",2008:"zh_shared_onBeforeCreateCompiler",2011:"zh_config_output_disableCssExtract",2025:"en_config_html_favicon",2029:"zh_guide_faq_general",2061:"en_guide_basic_typescript",2140:"zh_config_output_overrideBrowserslist",2213:"en_api_builder-instance",2232:"zh_guide_debug_inspector",2271:"en_shared_onBeforeBuild",2278:"zh_shared_onBeforeBuild",2315:"en_config_html_appIcon",2331:"en_config_tools_devServer",2401:"en_config_tools_tsChecker",2403:"en_config_tools_pug",2456:"en_config_html_inject",2477:"en_config_tools_autoprefixer",2540:"zh_config_html_crossorigin",2566:"zh_config_html_template",2570:"en_config_html_title",2634:"en_config_html_templateParameters",2638:"zh_config_html_templateParametersByEntries",2642:"zh_guide_basic_typescript",2693:"zh_plugins_plugin-image-compress",2727:"en_config_tools_minifyCss",2760:"zh_config_output_disableTsChecker",2797:"en_api_builder-core",2847:"en_config_source_globalVars",2855:"zh_config_performance_removeMomentLocale",2870:"zh_config_dev_assetPrefix",2893:"en_guide_features",2897:"en_config_tools_webpackChain",3020:"zh_config_tools_cssLoader",3059:"zh_config_performance_profile",3062:"en_config_dev_hmr",3065:"en_guide_optimization_build-performance",3092:"zh_guide_advanced_browser-compatibility",3119:"zh_config_tools_cssExtract",3143:"zh_config_source_moduleScopes",3181:"zh_guide_basic_output-files",3209:"zh_config_html_favicon",3256:"en_config_tools_cssLoader",3272:"zh_config_html_titleByEntries",3310:"en_config_source_define",3317:"en_config_output_enableInlineStyles",3372:"zh_config_tools_postcss",3406:"zh_guide_advanced_custom-webpack-config",3431:"en_guide_advanced_browserslist",3459:"zh_guide_optimization_build-performance",3490:"zh_config_html_faviconByEntries",3608:"zh_config_source_preEntry",3614:"zh_plugins_plugin-node-polyfill",3670:"en_shared_getNormalizedConfig",3722:"en_config_dev_assetPrefix",3751:"zh_shared_onDevCompileDone",3756:"zh_config_tools_tsLoader",3766:"zh_api_config-html",3778:"en_plugins_plugin-esbuild",3784:"en_config_security_sri",3811:"en_shared_onExit",3827:"zh_config_source_resolveExtensionPrefix",3839:"zh_api_config-dev",3873:"en_guide_advanced_alias",3942:"en_config_output_convertToRem",3952:"zh_plugins_integration",3978:"en_api_config-dev",3991:"en_config_output_disableInlineRuntimeChunk",4080:"zh_plugins_plugin-esbuild",4094:"en_guide_advanced_rem",4132:"en_config_output_copy",4170:"zh_guide_basic_json-files",4175:"zh_guide_basic_css-usage",4227:"en_config_output_disableCssExtract",4263:"zh_config_dev_progressBar",4285:"zh_config_tools_terser",4298:"zh_config_output_assetPrefix",4321:"en_config_output_cleanDistPath",4349:"zh_shared_onExit",4395:"zh_config_performance_printFileSize",4513:"en_config_tools_inspector",4572:"zh_config_dev_startUrl",4578:"en_api_builder-types",4615:"zh_config_output_svgDefaultExport",4632:"en_config_output_enableCssModuleTSDeclaration",4639:"en_config_dev_port",4697:"zh_shared_getBuilderConfig",4709:"zh_config_security_sri",4738:"zh_config_output_polyfill",4764:"zh_guide_introduction",4768:"zh_shared_getHTMLPaths",4780:"zh_config_tools_pug",4784:"global.d",4831:"en_config_tools_terser",4854:"zh_config_output_filename",4871:"en_config_tools_styledComponents",4877:"en_shared_onDevCompileDone",4904:"en_guide_faq_exceptions",4912:"zh_config_output_enableInlineScripts",4919:"en_guide_optimization_optimize-bundle",4932:"zh_guide_advanced_alias",4933:"en_api_config-experiments",4960:"en_config_html_meta",5001:"en_config_dev_startUrl",5064:"en_config_output_filename",5077:"zh_config_dev_hmr",5222:"zh_guide_advanced_rem",5224:"zh_config_html_appIcon",5386:"en_config_source_alias",5391:"zh_config_source_include",5430:"en_api_config-html",5451:"zh_config_source_compileJsDataURI",5464:"en_config_html_disableHtmlFolder",5492:"zh_plugins_list",5495:"zh_shared_onAfterStartDevServer",5506:"en_config_dev_progressBar",5521:"components_NextSteps",5531:"zh_api_plugin-core",5637:"zh_guide_glossary",5688:"zh_config_performance_bundleAnalyze",5697:"zh_config_tools_inspector",5791:"en_shared_getBuilderConfig",5841:"en_guide_basic_output-files",5867:"en_api_config-output",5868:"en_config_performance_profile",5923:"en_config_source_include",5952:"zh_config_output_legalComments",5974:"zh_config_tools_htmlPlugin",5979:"zh_guide_quick-start",6066:"en_guide_basic_static-assets",6080:"en_plugins_testing",6086:"en_config_output_externals",6093:"en_guide_debug_inspector",6119:"en_config_output_overrideBrowserslist",6194:"en_config_tools_webpack",6210:"en_guide_basic_html-template",6219:"en_config_output_enableInlineScripts",6226:"zh_config_output_enableInlineStyles",6236:"en_config_output_assetPrefix",6385:"zh_config_source_define",6418:"zh_config_output_convertToRem",6472:"en_guide_basic_css-usage",6477:"zh_config_performance_removeConsole",6489:"zh_config_html_metaByEntries",6504:"en_guide_advanced_define",6520:"en_config_html_titleByEntries",6551:"zh_config_output_disableMinimize",6575:"zh_config_tools_less",6592:"en_config_html_faviconByEntries",6593:"en_config_output_charset",6596:"en_shared_onAfterStartDevServer",6602:"zh_config_html_tagsByEntries",6690:"en_config_output_assetsRetry",6753:"zh_config_output_copy",6785:"en_guide_basic_build-target",6805:"zh_config_html_inject",6811:"en_plugins_integration",6819:"en_config_html_tags",6824:"zh_config_output_externals",6825:"en_plugins_plugin-swc",6870:"en_config_output_disableMinimize",6887:"zh_guide_basic_svg-assets",6925:"zh_config_tools_babel",6952:"en_config_tools_less",6972:"en_plugins_plugin-stylus",7021:"zh_config_tools_webpackChain",7099:"zh_guide_basic_static-assets",7202:"zh_config_html_title",7320:"zh_config_output_assetsRetry",7370:"en_guide_advanced_browser-compatibility",7381:"en_config_performance_bundleAnalyze",7403:"en_guide_advanced_hmr",7409:"en_shared_onAfterBuild",7429:"en_config_output_distPath",7480:"en_config_html_tagsByEntries",7544:"zh_config_output_enableAssetManifest",7545:"zh_config_source_resolveMainFields",7578:"en_guide_debug_debug-mode",7622:"en_config_performance_removeConsole",7629:"components_Step",7666:"zh_plugins_plugin-stylus",7680:"en_config_tools_cssExtract",7681:"zh_config_output_distPath",7687:"zh_api_config-security",7708:"en_config_source_exclude",7737:"zh_guide_advanced_browserslist",7747:"zh_shared_getNormalizedConfig",7762:"en_config_output_enableAssetFallback",7784:"zh_config_tools_minifyCss",7787:"zh_config_tools_styleLoader",7809:"zh_config_output_cssModuleLocalIdentName",7828:"en_config_output_svgDefaultExport",7892:"zh_guide_faq_exceptions",7907:"zh_guide_advanced_define",7917:"en_api_config-security",7962:"en_config_output_dataUriLimit",8006:"en_plugins_introduction",8021:"zh_guide_faq_features",8126:"zh_shared_onBeforeStartDevServer",8161:"zh_config_experiments_lazyCompilation",8246:"en_config_performance_buildCache",8254:"en_config_html_crossorigin",8308:"zh_guide_basic_css-modules",8395:"en_config_source_moduleScopes",8403:"en_guide_faq_general",8421:"en_guide_glossary",8425:"zh_config_output_disableCssModuleExtension",8426:"zh_shared_isPluginExists",8599:"zh_config_output_disableSourceMap",8610:"en_shared_getHTMLPaths",8630:"zh_config_tools_sass",8651:"zh_config_source_alias",8667:"zh_config_tools_devServer",8684:"en_api_plugin-core",8705:"en_api_config-tools",8717:"en_guide_optimization_inline-assets",8737:"en_config_output_polyfill",8801:"zh_config_output_enableAssetFallback",8829:"en_config_html_injectByEntries",8835:"en_shared_onBeforeStartDevServer",8884:"zh_plugins_plugin-swc",8893:"zh_config_tools_tsChecker",8930:"en_config_source_resolveExtensionPrefix",8975:"en_shared_isPluginExists",8977:"zh_plugins_testing",9011:"zh_config_output_enableLatestDecorators",9024:"zh_config_output_dataUriLimit",9031:"zh_config_tools_styledComponents",9038:"en_plugins_plugin-image-compress",9082:"en_guide_faq_features",9119:"en_config_dev_https",9200:"en_config_output_disableFilenameHash",9209:"en_guide_introduction",9308:"en_config_html_templateParametersByEntries",9313:"en_config_html_mountId",9350:"zh_config_html_tags",9364:"en_api_plugin-hooks",9438:"en_api_config-performance",9483:"zh_config_dev_https",9553:"en_config_performance_removeMomentLocale",9584:"zh_guide_optimization_optimize-bundle",9611:"zh_api_builder-types",9656:"zh_api_builder-core",9675:"en_config_output_disableTsChecker",9711:"en_guide_basic_css-modules",9733:"zh_plugins_introduction",9742:"en_config_output_cssModuleLocalIdentName",9762:"en_config_tools_tsLoader",9769:"en_shared_onBeforeCreateCompiler",9797:"zh_config_source_exclude",9836:"zh_config_source_globalVars",9878:"en_config_source_preEntry",9927:"zh_config_html_meta",9929:"zh_api_config-performance",9935:"en_config_tools_htmlPlugin"}[e]||e)+"."+{27:"0fd1be80",44:"e3f8d5bf",54:"6a15bfce",99:"ef8e926a",163:"42cd0c3a",195:"98f47f0a",207:"106aad2a",213:"bca76695",234:"3159c9ec",285:"cb9fbdd7",288:"461a0b02",299:"2ef03406",301:"7c7b7103",315:"ef825c38",461:"58253bbd",551:"29837d88",557:"5d5eab52",570:"a44d5eea",583:"233c968c",591:"c511fe0b",613:"e5b378a7",652:"5d3cbfb2",659:"df90e340",707:"f86fa467",771:"6965ae19",789:"9c0b093e",805:"fc224855",806:"6f4ef302",818:"5061cc66",826:"ce770f51",901:"0bc2bbe4",902:"93d821ae",951:"7dadf3d6",1001:"978fa3d0",1085:"8306d188",1108:"b34c391d",1164:"10a224ef",1167:"e13051d3",1189:"2ff8357f",1320:"13a3c99d",1387:"2a0bdfe8",1436:"db46a621",1447:"38a2ed53",1596:"a8e16583",1655:"05675565",1677:"02bf4c19",1680:"3fae575a",1722:"ab90c051",1743:"024fc23f",1767:"00bd93ee",1773:"a084df37",1778:"fb510ad2",1780:"df4fad93",1786:"fea55e81",1813:"0034ff1c",1816:"5b1bccc6",1895:"5c16a242",1911:"193a1723",1963:"54c3f2ff",1969:"d854ca89",1989:"e1f40bcc",1999:"f9429633",2008:"9386cb37",2011:"28a35140",2025:"dadf11a9",2029:"fbecd2c3",2061:"bbf6eb77",2140:"6928b192",2213:"dd751033",2232:"91bf5aed",2271:"3b934750",2278:"56fbaaa0",2315:"78b8a027",2331:"3862a5b0",2401:"86783d3c",2403:"0d98380b",2456:"88bb1e19",2477:"803c4b2f",2540:"ca905753",2566:"a9f50a78",2570:"20413a9f",2634:"6e32bb2c",2638:"abdc6cc7",2642:"1c265de3",2693:"bfaa1d0f",2727:"5adaa6c3",2760:"3c4c6456",2797:"1556090d",2847:"6f0d6762",2855:"85d30f49",2870:"e32a3fc8",2893:"9567c3db",2897:"e053196c",3020:"97b64684",3059:"e7e5d383",3062:"563736d5",3065:"058e6366",3092:"68c39460",3119:"138b37f9",3143:"a5dd28e7",3181:"05e7657f",3209:"6987c66f",3256:"2bdcfffb",3272:"89bbd0a4",3310:"b98b36d2",3317:"34ccad97",3372:"f744da46",3406:"6ad5d918",3431:"55b33f90",3459:"93473d70",3490:"044bc8f9",3608:"afbd2d6c",3614:"bece6c3d",3670:"0b4c3511",3722:"384816b7",3751:"692507e3",3756:"1715aa59",3766:"1065020c",3778:"8a7e8ad1",3784:"6f74c133",3811:"95ad25ca",3827:"4e974a6f",3839:"642eb39d",3873:"ef1a6ebc",3942:"a8f6065a",3952:"f94ba034",3978:"347266ef",3991:"c889ae02",4080:"e61b0ae3",4094:"342b053c",4132:"f682e9bb",4170:"aec7bdae",4175:"e5ba0a12",4227:"d984b0a8",4263:"90424809",4285:"476c7cc1",4298:"affcbdea",4321:"10ee6c6f",4349:"d74324f5",4395:"816586fb",4513:"2b7b34a9",4572:"fa62b301",4578:"b2829e98",4615:"5ef36e37",4632:"0f8ebaea",4639:"272771f6",4697:"872ab7ed",4709:"bc9f2c4d",4738:"e0e41b7a",4764:"090f2eff",4768:"c4415f2d",4780:"77578da3",4784:"d4cb3c6a",4831:"d085b3e6",4854:"e8bed47d",4871:"915bf534",4877:"a21438ec",4904:"8b3b3a86",4912:"4e948751",4919:"c1b20466",4932:"cdc85673",4933:"10fd42d4",4960:"169730e2",5001:"57cf6661",5064:"132a1b05",5077:"4791b1d1",5222:"4890f2bc",5224:"5e976e47",5386:"6ba7c6fb",5391:"7548ccfd",5430:"593b56e1",5451:"b7e156e9",5464:"e121b2e5",5492:"c15ed941",5495:"09ad4d0c",5506:"3dafb80f",5521:"4ec19870",5531:"a417927d",5637:"fdba8984",5688:"cdab71d2",5697:"ef6c69ef",5791:"a6634715",5841:"7eaea098",5867:"522564ea",5868:"85f49314",5923:"e3121f1a",5952:"ef51aba7",5974:"50a35ad1",5979:"f0042fdf",6025:"e2db917a",6066:"319012ae",6080:"8bed082f",6086:"655ba3a9",6093:"9c78a6bd",6119:"c0bca129",6194:"d74fecaf",6210:"d57fa3bf",6219:"cbfced44",6226:"11d1b935",6236:"b89db1a5",6385:"31e6a587",6418:"d649d60c",6472:"ff42965b",6477:"6200cf1b",6489:"1b5d53c0",6504:"ba4845ed",6520:"7b803ba3",6551:"72db7d22",6575:"8c9169bb",6592:"80b36d79",6593:"0db51078",6596:"27d1b7fa",6602:"6a2240a9",6690:"63c2d639",6753:"57e90ef0",6785:"6d0a2e6e",6805:"6fae1db9",6811:"45442c5f",6819:"7f086f41",6824:"19a12097",6825:"51600264",6870:"6c97d094",6887:"4de07ec5",6925:"db211ebf",6952:"cae6f0b4",6972:"00872235",7021:"2f5fb7b2",7099:"b80eec23",7202:"69bfaa4f",7320:"cfdc363e",7370:"3b069413",7381:"2b8ebf63",7403:"88254d16",7409:"5d5e47d1",7429:"08df17ea",7480:"02af6a93",7544:"b0abc42f",7545:"8eff42ec",7578:"b4490093",7622:"02b2e9e2",7629:"4429c27b",7666:"f580a68d",7680:"1d958e9a",7681:"d93dcd25",7687:"ec2fd5c3",7708:"5b928cfc",7737:"422bb406",7747:"f14a2e4e",7762:"ed81af0c",7784:"374ee699",7787:"a65ce1f1",7809:"78074e1e",7828:"54360375",7892:"78527992",7907:"f4602df0",7917:"49464fb7",7962:"b9da9769",8006:"bdc36501",8021:"0df0589a",8126:"a4f370d2",8161:"55749517",8246:"e66830cf",8254:"305143ca",8308:"711b9a99",8395:"abc808cc",8403:"608b4496",8421:"1778f3b2",8425:"ca684daf",8426:"2df08ddb",8599:"32ef1718",8610:"b31976d0",8630:"aa01ed88",8651:"b2336518",8667:"8c33a55a",8684:"6ea7b4e0",8705:"e6396c9a",8717:"d508a205",8737:"87f6f59a",8801:"da5120a4",8829:"a8d749e0",8835:"79d66522",8884:"45e0c10a",8893:"d3d85cd5",8930:"d9dc2772",8975:"14df86fe",8977:"759eef4a",9011:"bc04cd80",9024:"52f3441e",9031:"21f97bf0",9038:"119baa06",9082:"ab591b60",9119:"63021abd",9200:"1e60315c",9209:"4873ef32",9308:"5d79681c",9313:"487f7f6f",9350:"4bce44aa",9364:"086e4a5d",9438:"d80238f9",9483:"60a5a5a7",9553:"40a858e6",9584:"70d7d8ac",9611:"ace2e614",9656:"d86396ef",9675:"f40f257e",9711:"4bdda0d8",9733:"6c67351c",9742:"9043d22c",9762:"b22853f6",9769:"0e25a778",9797:"8da859fb",9836:"1bd5a4ab",9878:"9d5fe984",9927:"cb6a5941",9929:"97868a56",9935:"51247361"}[e]+".js"},r.miniCssF=function(e){return"static/css/async/"+{1911:"en_guide_quick-start",4764:"zh_guide_introduction",5521:"components_NextSteps",5979:"zh_guide_quick-start",7629:"components_Step",9209:"en_guide_introduction"}[e]+"."+{1911:"f46cc4b1",4764:"f46cc4b1",5521:"bb07a773",5979:"f46cc4b1",7629:"e431101f",9209:"f46cc4b1"}[e]+".css"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,_){return Object.prototype.hasOwnProperty.call(e,_)},i={},o="@modern-js/builder-doc:",r.l=function(e,_,n,t){if(i[e])i[e].push(_);else{var c,a;if(void 0!==n)for(var f=document.getElementsByTagName("script"),s=0;s<f.length;s++){var d=f[s];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+n){c=d;break}}c||(a=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.setAttribute("data-webpack",o+n),c.src=e),i[e]=[_];var u=function(_,n){c.onerror=c.onload=null,clearTimeout(l);var o=i[e];if(delete i[e],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(n)})),_)return _(n)},l=setTimeout(u.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=u.bind(null,c.onerror),c.onload=u.bind(null,c.onload),a&&document.head.appendChild(c)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/builder/",t=function(e){return new Promise((function(_,n){var i=r.miniCssF(e),o=r.p+i;if(function(e,_){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var o=(c=n[i]).getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(o===e||o===_))return c}var t=document.getElementsByTagName("style");for(i=0;i<t.length;i++){var c;if((o=(c=t[i]).getAttribute("data-href"))===e||o===_)return c}}(i,o))return _();!function(e,_,n,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=function(t){if(o.onerror=o.onload=null,"load"===t.type)n();else{var c=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.href||_,f=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");f.code="CSS_CHUNK_LOAD_FAILED",f.type=c,f.request=a,o.parentNode.removeChild(o),i(f)}},o.href=_,document.head.appendChild(o)}(e,o,_,n)}))},c={6272:0},r.f.miniCss=function(e,_){c[e]?_.push(c[e]):0!==c[e]&&{1911:1,4764:1,5521:1,5979:1,7629:1,9209:1}[e]&&_.push(c[e]=t(e).then((function(){c[e]=0}),(function(_){throw delete c[e],_})))},function(){var e={6272:0};r.f.j=function(_,n){var i=r.o(e,_)?e[_]:void 0;if(0!==i)if(i)n.push(i[2]);else if(6272!=_){var o=new Promise((function(n,o){i=e[_]=[n,o]}));n.push(i[2]=o);var t=r.p+r.u(_),c=new Error;r.l(t,(function(n){if(r.o(e,_)&&(0!==(i=e[_])&&(e[_]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),t=n&&n.target&&n.target.src;c.message="Loading chunk "+_+" failed.\n("+o+": "+t+")",c.name="ChunkLoadError",c.type=o,c.request=t,i[1](c)}}),"chunk-"+_,_)}else e[_]=0},r.O.j=function(_){return 0===e[_]};var _=function(_,n){var i,o,t=n[0],c=n[1],a=n[2],f=0;if(t.some((function(_){return 0!==e[_]}))){for(i in c)r.o(c,i)&&(r.m[i]=c[i]);if(a)var s=a(r)}for(_&&_(n);f<t.length;f++)o=t[f],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(s)},n=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[];n.forEach(_.bind(null,0)),n.push=_.bind(null,n.push.bind(n))}()}();</script><script defer="defer" src="/builder/static/js/lib-polyfill.c826e6c1.js"></script><script defer="defer" src="/builder/static/js/lib-lodash.ef14e6c1.js"></script><script defer="defer" src="/builder/static/js/lib-react.53e5563e.js"></script><script defer="defer" src="/builder/static/js/1340.871cdbf7.js"></script><script defer="defer" src="/builder/static/js/main.70776454.js"></script><link href="/builder/static/css/main.a774a611.css" rel="stylesheet"></head><body><div id="root"><div style="height:100%"><header z="4" class="top-0 left-0 md:border-b lg:border-b relative md:fixed" style="border-bottom:1px solid var(--modern-c-divider-light)" w="full"><div class="relative" p="x-6" transition="background-color duration-500"><div flex="~" justify="between" align="items-center" h="full" class="bcLAe"><div class="undefined"><a href="/builder/" w="full" h="full" text="1rem" font="semibold" transition="opacity duration-300" hover="opacity-60" class="flex items-center"><span>Modern.js Builder</span></a></div><div flex="~ 1" justify="end" align-items-center="~"><div class="LPoOT"><div class="search" flex="sm:1" p="sm:l-8"><div flex="~" align="items-center" pos="relative" m="r-2" font="semibold"><svg width="32" height="32" viewBox="0 0 32 32" w="5" h="5" fill="currentColor"><path fill="#888888" d="m29 27.586l-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9a9.01 9.01 0 0 1-9-9Z"></path></svg><input disabled="" cursor="text focus:auto" placeholder="Search" height="8" border="none" type="text" text="sm" p="t-0 r-2 b-0 l-2" transition="all duration-200 ease" class="rounded-sm HYrjO " aria-label="Search" autoComplete="off"/><div m="r-3" w="10" h="6" p="x-1.5" border="1px solid gray-light-3 rounded-md" text="xs gray-light-3" flex="~" align="items-center" justify="around" class="M7ZZK"><span>⌘</span><span>K</span></div></div></div><div class="menu" h="14"><div text="sm" font="medium" m="x-3" class=""><a class="qVky9 " target="" cursor="pointer" href="/builder/guide/introduction.html">指南</a></div><div text="sm" font="medium" m="x-3" class="text-brand"><a class="qVky9 " target="" cursor="pointer" href="/builder/api/index.html">API</a></div><div text="sm" font="medium" m="x-3" class=""><a class="qVky9 " target="" cursor="pointer" href="/builder/plugins/introduction.html">插件</a></div></div><div flex="~" text="sm" font="bold" align="items-center" class="translation sjQjZ"><div m="x-1.5"><div h="14" class="relative" flex="~ center"><button flex="~ center" align="items-center" font="medium" text="sm text-1 hover:text-2" transition="color duration-200" class="nav-menu-group-button"><span m="r-1" text="sm" font="medium"><svg width="32" height="32" viewBox="0 0 32 32" w="18px" h="18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6l2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"></path></svg></button><div pos="top-13 right-0" m="x-0.8" transition="opacity duration-300" class="nav-menu-group-content absolute" style="opacity:0;visibility:hidden"><div p="3" w="full" h="full" class="min-w-128px max-h-100vh rounded-xl whitespace-nowrap" bg="white" style="box-shadow:var(--modern-shadow-3);margin-right:-1.5rem;z-index:100;border:1px solid var(--modern-c-divider-light)"><div class="rounded-md" p="y-1.6 l-3"><span m="r-1" text="brand">简体中文</span></div><div font="medium"><a class="qVky9 " target="" cursor="pointer" href="/builder/en/api/config-source"><div class="rounded-md" hover="bg-mute" p="y-1.6 l-3 r-6"><div flex="~"><span m="r-1">English<svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1 l-1" class="inline-block align-text-top"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></span></div></div></a></div></div></div></div></div></div><div class="appearance sjQjZ" display="none sm:flex" align-items-center="center"><button class="xSrUP undefined" id="" type="button" role="switch"><span class="CSfjI"><span class="zDdMk"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="nk0gt"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="A1HSI"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div><div class="social-links WIILt" nav-h="mobile sm:desktop" flex="~" align-items-center="~" pos="relative"><div h="full" flex="~" gap="x-4" align-items-center="~" transition="color duration-300"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer"><div class="a9VBM"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div><button class=" eE8v3"><span class="pOzTZ"><span class="aD0WQ"></span><span class="GwaZ7"></span><span class="HyMv9"></span></span></button><div class="XAjwG " id="navScreen"><div class="VrSyn"><div class="YCP7r"><div w="full" class="LiNpS"><div text="sm" font="medium" m="x-3" class=""><a class="qVky9 " target="" cursor="pointer" href="/builder/guide/introduction.html">指南</a></div></div><div w="full" class="LiNpS"><div text="sm" font="medium" m="x-3" class="text-brand"><a class="qVky9 " target="" cursor="pointer" href="/builder/api/index.html">API</a></div></div><div w="full" class="LiNpS"><div text="sm" font="medium" m="x-3" class=""><a class="qVky9 " target="" cursor="pointer" href="/builder/plugins/introduction.html">插件</a></div></div></div><div class="afhvm" flex="~" justify="center" align-items-center="center"><div class="align-items-center appearance pa-2 NeDxD" flex="~" justify="center"><button class="xSrUP undefined" id="" type="button" role="switch"><span class="CSfjI"><span class="zDdMk"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="nk0gt"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="A1HSI"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div></div><div flex="~" text="sm" font="bold" justify="center"><div m="x-1.5"><div pos="relative" class=" FwXtz"><button class="YoOiJ"><span class="QFqBl"><svg width="32" height="32" viewBox="0 0 32 32" w="18px" h="18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6l2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" GPyuP "><path fill="currentColor" d="M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"></path></svg></button><div><div class="SEGAO"><div class="pa-1"><span m="r-1" text="brand">简体中文</span></div><div class="pa-1" font="medium"><a class="qVky9 " target="" cursor="pointer" href="/builder/en"><div><div flex="~"><span m="r-1">English</span><svg width="32" height="32" viewBox="0 0 32 32" w="11px" h="11px" text="text-3" m="t-1 r-1"><path fill="currentColor" d="M10 6v2h12.59L6 24.59L7.41 26L24 9.41V22h2V6H10z"></path></svg></div></div></a></div></div></div></div></div></div><div class="social-links WIILt" nav-h="mobile sm:desktop" flex="~" align-items-center="~" pos="relative"><div h="full" flex="~" gap="x-4" align-items-center="~" transition="color duration-300"><a href="https://github.com/modern-js-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer"><div class="a9VBM"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div></div></div></header><section><div p="t-0 b-24 md:6" m="md:t-14" class="NycN9"><div class="htA00"><button flex="~ center" class="i_YqX"><div text="md" m="r-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span text="sm">Menu</span></button></div><aside class="WSh16 " style="border-right:1px solid var(--modern-c-divider-light)"><nav m="t-1"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/index.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">API 总览</div></a><section block="~"><div flex="~" justify="between" items-start="~" cursor="pointer" class="items-center SCFOX"><h2 p="y-1 x-2" text="sm" font="semibold">配置</h2></div><div style="transition:height 0.2s ease-in-out;overflow:hidden;height:256px"><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-source.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="DYqu8" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Source Config</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-html.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Html Config</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-dev.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Dev Config</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-output.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Output Config</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-security.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Security Config</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-tools.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Tools Config</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-performance.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Performance Config</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/config-experiments.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Experiments Config</div></a></div></div></section><section block="~"><div flex="~" justify="between" items-start="~" cursor="pointer" class="items-center SCFOX"><h2 p="y-1 x-2" text="sm" font="semibold">Node API</h2></div><div style="transition:height 0.2s ease-in-out;overflow:hidden;height:96px"><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/builder-core.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Builder Core</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/builder-instance.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Builder Instance</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/builder-types.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Builder Types</div></a></div></div></section><section block="~"><div flex="~" justify="between" items-start="~" cursor="pointer" class="items-center SCFOX"><h2 p="y-1 x-2" text="sm" font="semibold">Plugin API</h2></div><div style="transition:height 0.2s ease-in-out;overflow:hidden;height:64px"><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/plugin-core.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Plugin Core</div></a></div><div m="last:b-0.5 l-4"><a class="qVky9 eKj7t" target="" cursor="pointer" href="/builder/api/plugin-hooks.html"><div m="t-1" p="y-1 x-2" block="~" text="sm" border="rounded-sm" font-medium="~" class="SCFOX" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Plugin Hooks</div></a></div></div></section></nav></aside><div flex="~ 1 shrink-0" class="Attzr"><div class="max-w-full md:max-w-3/4 lg:min-w-640px relative"><div class="modern-doc"><!--$--><h1 id="source-config"><a class="header-anchor" aria-hidden="true" href="#source-config">#</a>Source Config</h1>
<p>本章节描述了 Builder 中与源代码解析、编译方式相关的配置。</p>
<h2 id="sourcealias"><a class="header-anchor" aria-hidden="true" href="#sourcealias">#</a>source.alias</h2>
<!-- -->
<ul>
<li>Type: <code>Record&lt;string, string | string[]&gt; | Function</code></li>
<li>Default: <code>undefined</code></li>
</ul>
<p>设置文件引用的别名，对应 webpack 的 <a href="https://webpack.js.org/configuration/resolve/#resolvealias" target="_blank" rel="nofollow">resolve.alias</a> 配置。</p>
<div class="modern-directive tip"><p class="modern-directive-title">TIP</p><div class="modern-directive-content"><p>
对于 TypeScript 项目，只需要在 <code>tsconfig.json</code> 中配置 <a href="https://www.typescriptlang.org/tsconfig#paths" target="_blank" rel="nofollow">compilerOptions.paths</a> 即可，Builder 会自动识别 <code>tsconfig.json</code> 里的别名，因此不需要额外配置 <code>alias</code>字段。</p></div></div>
<h4 id="object-类型"><a class="header-anchor" aria-hidden="true" href="#object-类型">#</a>Object 类型</h4>
<p><code>alias</code> 的值可以定义为 Object 类型，其中的相对路径会自动被 Builder 转换为绝对路径。</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">alias</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">@common</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src/common</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>以上配置完成后，如果在代码中引用 <code>@common/Foo.tsx</code>, 则会映射到 <code>&lt;root&gt;/src/common/Foo.tsx</code> 路径上。</p>
<h4 id="function-类型"><a class="header-anchor" aria-hidden="true" href="#function-类型">#</a>Function 类型</h4>
<p><code>alias</code> 的值定义为函数时，可以接受预设的 alias 对象，并对其进行修改。</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">alias</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">alias</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">alias</span><span style="color:#D8DEE9FF">[</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">@common</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">] </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src/common</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>也可以在函数中返回一个新对象作为最终结果，新对象会覆盖预设的 alias 对象。</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">alias</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">alias</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">@common</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src/common</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h2 id="sourceinclude"><a class="header-anchor" aria-hidden="true" href="#sourceinclude">#</a>source.include</h2>
<!-- -->
<ul>
<li>Type: <code>Array&lt;string | RegExp&gt;</code></li>
<li>Default: <code>[]</code></li>
</ul>
<p>出于编译性能的考虑，默认情况下，Builder 不会编译 node_modules 下的 JavaScript/TypeScript 文件，也不会编译当前工程目录外部的 JavaScript/TypeScript 文件。</p>
<p>通过 <code>source.include</code> 配置项，可以指定需要额外进行编译的目录或模块。用法与 webpack 中的 <a href="https://webpack.js.org/configuration/module/#ruleinclude" target="_blank" rel="nofollow">Rule.include</a> 一致，支持传入字符串或正则表达式来匹配模块的路径。</p>
<p>比如:</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">path</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">path</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">include</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#D8DEE9">path</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">resolve</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">__dirname</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">../other-dir</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h3 id="场景示例"><a class="header-anchor" aria-hidden="true" href="#场景示例">#</a>场景示例</h3>
<p>比较典型的使用场景是编译 node_modules 下的文件，因为某些第三方依赖存在 ES6+ 的语法，这可能导致在低版本浏览器上无法运行，你可以通过该选项指定需要编译的依赖，从而解决此类问题。以 <code>query-string</code> 为例，你可以做如下的配置：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">path</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">path</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">include</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 方法一:</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 先通过 require.resolve 来获取模块的路径</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 再通过 path.dirname 来指向对应的目录</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">path</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">dirname</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">require</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">resolve</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">query-string</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">))</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 方法二:</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 通过正则表达式进行匹配</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 所有包含 `/query-string/` 的路径都会被匹配到</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">/</span><span style="color:#EBCB8B">\/query-string\/</span><span style="color:#ECEFF4">/</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">    ]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<blockquote>
<p>注意，该配置只会编译 <code>query-string</code> 自身的代码，不会编译 <code>query-string</code> 的<strong>子依赖</strong>。如果需要编译 <code>query-string</code> 的子依赖，则需要将对应的 npm 包也加入到 <code>source.include</code> 中。</p>
</blockquote>
<h3 id="monorepo-项目"><a class="header-anchor" aria-hidden="true" href="#monorepo-项目">#</a>Monorepo 项目</h3>
<p>使用 Monorepo 时，如果需要引用 Monorepo 中其他库的源代码，也可以直接在 <code>source.include</code> 进行配置:</p>
<div class="language-ts"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">path</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">path</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#D8DEE9">include</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 方法一:</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 编译 Monorepo 的 package 目录下的所有文件</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">path</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">resolve</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">__dirname</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">../../packages</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 方法二:</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 编译 Monorepo 的 package 目录里某个包的源代码</span></span>
<span class="line"><span style="color:#ECEFF4">      </span><span style="color:#616E88">// 这种写法匹配的范围更加精准，对整体编译性能的影响更小</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">path</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">resolve</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">__dirname</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">../../packages/xxx/src</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">    ]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h3 id="注意事项"><a class="header-anchor" aria-hidden="true" href="#注意事项">#</a>注意事项</h3>
<p>注意，Babel 默认无法编译 CommonJS 模块，当你使用 <code>source.include</code> 来编译 CommonJS 模块时，需要将 Babel 的 <code>sourceType</code> 配置设置为 <code>unambiguous</code>：</p>
<div class="language-ts"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">tools</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">babel</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">config</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">config</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">sourceType</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">unambiguous</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>将 <code>sourceType</code> 设置为 <code>unambiguous</code> 可能会产生一些其他影响，请参考 <a href="https://babeljs.io/docs/en/options#sourcetype" target="_blank" rel="nofollow">Babel 官方文档</a>。</p>
<h2 id="sourceexclude"><a class="header-anchor" aria-hidden="true" href="#sourceexclude">#</a>source.exclude</h2>
<!-- -->
<ul>
<li>Type: <code>Array&lt;string | RegExp&gt;</code></li>
<li>Default: <code>[]</code></li>
</ul>
<p>指定不需要编译的 JavaScript/TypeScript 文件。用法与 webpack 中的 <a href="https://webpack.js.org/configuration/module/#ruleexclude" target="_blank" rel="nofollow">Rule.exclude</a> 一致，支持传入字符串或正则表达式来匹配模块的路径。</p>
<p>比如:</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">path</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">path</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">exclude</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#D8DEE9">path</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">resolve</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">__dirname</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">src/module-a</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span><span style="color:#EBCB8B"> </span><span style="color:#ECEFF4">/</span><span style="color:#EBCB8B">src\/module-b</span><span style="color:#ECEFF4">/</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h2 id="sourcecompilejsdatauri"><a class="header-anchor" aria-hidden="true" href="#sourcecompilejsdatauri">#</a>source.compileJsDataURI</h2>
<!-- -->
<ul>
<li>Type: <code>boolean</code></li>
<li>Default: <code>true</code></li>
</ul>
<p>对于使用 Data URI 引入的 JavaScript 代码，是否采用 babel 进行编译。</p>
<p>比如以下代码：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">x</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">data:text/javascript,export default 1;</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">data:text/javascript;charset=utf-8;base64,Y29uc29sZS5sb2coJ2lubGluZSAxJyk7</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h4 id="示例"><a class="header-anchor" aria-hidden="true" href="#示例">#</a>示例</h4>
<p>添加以下配置来关闭：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">compileJsDataURI</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">false</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h2 id="sourcedefine"><a class="header-anchor" aria-hidden="true" href="#sourcedefine">#</a>source.define</h2>
<!-- -->
<ul>
<li>Type: <code>Record&lt;string, unknown&gt;</code></li>
<li>Default: <code>{}</code></li>
</ul>
<p>构建时将代码中的变量替换成其它值或者表达式，可以用于在代码逻辑中区分开发环境与生产环境等场景。</p>
<p>传入的配置对象的键名是需要替换变量的名称，或者是用 <code>.</code> 连接的多个标识符，配置项的值则根据类型进行不同的处理：</p>
<ul>
<li>字符串会被当作代码片段。</li>
<li>包括函数在内的其他类型会被转换成字符串。</li>
<li>嵌套对象的父子键名之间会用 <code>.</code> 连接作为需要替换的变量名。</li>
<li>以 typeof 开头的键名会用来替换 typeof 调用。</li>
</ul>
<p>更多细节参考 <a href="https://webpack.js.org/plugins/define-plugin/" target="_blank" rel="nofollow">https://webpack.js.org/plugins/define-plugin/</a>。</p>
<h4 id="示例"><a class="header-anchor" aria-hidden="true" href="#示例">#</a>示例</h4>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">define</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">PRODUCTION</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#81A1C1">true</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">VERSION</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">5fa3b9</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">BROWSER_SUPPORTS_HTML5</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">true</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">TWO</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">1 + 1</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">typeof window</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">object</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">process.env.NODE_ENV</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">process</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">env</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">NODE_ENV</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">import.meta</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">test</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">undefined</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>表达式会被替换为对应的代码段：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">foo</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">TWO</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// ⬇️ Turn into being...</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">foo</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">1</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">+</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">1</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h2 id="sourceglobalvars"><a class="header-anchor" aria-hidden="true" href="#sourceglobalvars">#</a>source.globalVars</h2>
<!-- -->
<ul>
<li>Type: <code>Record&lt;string, JSONValue&gt;</code></li>
<li>Default:</li>
</ul>
<div class="language-ts"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#616E88">// Builder 会自动添加环境变量 `process.env.NODE_ENV` 作为默认值，因此你不需要手动添加它。</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">defaultGlobalVars</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">process.env.NODE_ENV</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">process</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">env</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">NODE_ENV</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>构建时将类似 <code>process.env.FOO</code> 的全局变量表达式替换为指定的值，比如：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#D8DEE9">console</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">log</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">process</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">env</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">NODE_ENV</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// ⬇️ Turn into being...</span></span>
<span class="line"><span style="color:#D8DEE9">console</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">log</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">development</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>使用解构赋值时，构建器无法判断变量 <code>NODE_ENV</code> 是否与要替换的表达式 <code>process.env.NODE_ENV</code> 存在关联，所以这样的使用方式是无效的：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">NODE_ENV</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">process</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">env</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9">console</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">log</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">NODE_ENV</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#616E88">// ❌ Won&#x27;t get a string.</span></span>
<span class="line"></span></code></pre></div></div>
<p><code>source.globalVars</code> 是 <code>source.define</code> 的一个语法糖，唯一的区别是 <code>source.globalVars</code> 会自动将传入的值进行 JSON 序列化处理，这使得设置全局变量的值更容易。注意 <code>globalVars</code> 的每个值都需要是可以被 JSON 序列化的值。</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">globalVars</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">process.env.BUILD_VERSION</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">0.0.1</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">import.meta.foo</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">bar</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">42</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">import.meta.baz</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">false</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">define</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">process.env.BUILD_VERSION</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">0.0.1</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">import.meta</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#88C0D0">foo</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">bar</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">42</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#88C0D0">baz</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">JSON</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">stringify</span><span style="color:#D8DEE9FF">(</span><span style="color:#81A1C1">false</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h4 id="示例"><a class="header-anchor" aria-hidden="true" href="#示例">#</a>示例</h4>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">globalVars</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">ENABLE_VCONSOLE</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">true</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">APP_CONTEXT</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">answer</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">42</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h2 id="sourcemodulescopes"><a class="header-anchor" aria-hidden="true" href="#sourcemodulescopes">#</a>source.moduleScopes</h2>
<!-- -->
<ul>
<li>Type: <code>Array&lt;string | Regexp&gt; | Function</code></li>
<li>Default: <code>undefined</code></li>
</ul>
<p>限制源代码的引用路径。配置该选项后，所有源文件只能从约定的目录下引用代码，从其他目录引用代码会产生对应的报错提示。</p>
<h4 id="示例"><a class="header-anchor" aria-hidden="true" href="#示例">#</a>示例</h4>
<p>首先我们配置 <code>moduleScopes</code> 仅包含 <code>src</code> 目录：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">moduleScopes</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>然后在 <code>src/App.tsx</code> 中导入 <code>src</code> 目录外部的 <code>utils/a</code> 模块:</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">a</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">from</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">../utils/a</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>在编译时，会提示引用路径错误:</p>
<p><img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/docs/module-scopes-error.png" alt="scopes-error"/></p>
<p>通过该选项配置 <code>utils</code> 目录，再进行编译，则不会出现错误提示。</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">moduleScopes</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./utils</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h4 id="array-类型"><a class="header-anchor" aria-hidden="true" href="#array-类型">#</a>Array 类型</h4>
<p>当 <code>moduleScopes</code> 的值为 <code>Array</code> 类型时，可以直接设置若干个代码路径，比如添加以下配置：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">moduleScopes</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./shared</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./utils</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h4 id="function-类型"><a class="header-anchor" aria-hidden="true" href="#function-类型">#</a>Function 类型</h4>
<p><code>moduleScopes</code> 也支持通过函数的形式来进行修改，避免覆盖默认值：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">moduleScopes</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">scopes</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#D8DEE9">scopes</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">push</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./shared</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h2 id="sourcepreentry"><a class="header-anchor" aria-hidden="true" href="#sourcepreentry">#</a>source.preEntry</h2>
<!-- -->
<ul>
<li>Type: <code>string | string[]</code></li>
<li>Default: <code>undefined</code></li>
</ul>
<p>在每个页面的入口文件前添加一段代码，这段代码会早于页面的代码执行，因此可以用于执行一些全局的代码逻辑，比如注入 polyfill、设置全局样式等。</p>
<h4 id="添加单个脚本"><a class="header-anchor" aria-hidden="true" href="#添加单个脚本">#</a>添加单个脚本</h4>
<p>首先创建一个 <code>src/polyfill.ts</code> 文件：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#D8DEE9">console</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">log</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">I am a polyfill</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>然后将 <code>src/polyfill.ts</code> 配置到 <code>source.preEntry</code> 上：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">preEntry</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src/polyfill.ts</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>重新运行编译并访问任意页面，可以看到 <code>src/polyfill.ts</code> 中的代码已经执行，并在 console 中输出了对应的内容。</p>
<h4 id="添加全局样式"><a class="header-anchor" aria-hidden="true" href="#添加全局样式">#</a>添加全局样式</h4>
<p>你也可以通过 <code>source.preEntry</code> 来配置全局样式，这段 CSS 代码会早于页面代码加载，比如引入一个 <code>normalize.css</code> 文件：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">preEntry</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src/normalize.css</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h4 id="添加多个脚本"><a class="header-anchor" aria-hidden="true" href="#添加多个脚本">#</a>添加多个脚本</h4>
<p>你可以将 <code>preEntry</code> 设置为数组来添加多个脚本，它们会按数组顺序执行：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">preEntry</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src/polyfill-a.ts</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">./src/polyfill-b.ts</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h2 id="sourceresolveextensionprefix"><a class="header-anchor" aria-hidden="true" href="#sourceresolveextensionprefix">#</a>source.resolveExtensionPrefix</h2>
<!-- -->
<ul>
<li>Type: <code>string | Record&lt;BuilderTarget, string&gt;</code></li>
<li>Default: <code>undefined</code></li>
</ul>
<p>用于为 <a href="https://webpack.js.org/configuration/resolve/#resolveextensions" target="_blank" rel="nofollow">resolve.extensions</a> 添加统一的前缀。</p>
<p>如果多个文件拥有相同的名称，但具有不同的文件后缀，Builder 会根据 extensions 数组的顺序进行识别，解析数组中第一个被识别的文件，并跳过其余文件。</p>
<h4 id="示例"><a class="header-anchor" aria-hidden="true" href="#示例">#</a>示例</h4>
<p>下面是配置 <code>.web</code> 前缀的例子。</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">resolveExtensionPrefix</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.web</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>配置完成后，extensions 数组会发生以下变化：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#616E88">// 配置前</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">extensions</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.js</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.ts</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">...</span><span style="color:#D8DEE9FF">]</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// 配置后</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">extensions</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.web.js</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.js</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.web.ts</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.ts</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">...</span><span style="color:#D8DEE9FF">]</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>在代码中 <code>import &#x27;./foo&#x27;</code> 时，会优先识别 <code>foo.web.js</code> 文件，再识别 <code>foo.js</code> 文件。</p>
<h4 id="根据产物类型设置"><a class="header-anchor" aria-hidden="true" href="#根据产物类型设置">#</a>根据产物类型设置</h4>
<p>当你同时构建多种类型的产物时，你可以为不同的产物类型设置不同的 extension 前缀。此时，你需要把 <code>resolveExtensionPrefix</code> 设置为一个对象，对象的 key 为对应的产物类型。</p>
<p>比如为 <code>web</code> 和 <code>node</code> 设置不同的 extension 前缀：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">output</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">resolveExtensionPrefix</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#88C0D0">web</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.web</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#88C0D0">node</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">.node</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<p>在代码中 <code>import &#x27;./foo&#x27;</code> 时，对于 node 产物，会优先识别 <code>foo.node.js</code> 文件，而对于 web 产物，则会优先识别 <code>foo.web.js</code> 文件。</p>
<h2 id="sourceresolvemainfields"><a class="header-anchor" aria-hidden="true" href="#sourceresolvemainfields">#</a>source.resolveMainFields</h2>
<!-- -->
<ul>
<li>Type:</li>
</ul>
<div class="language-ts"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">type</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">Fields</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> (</span><span style="color:#8FBCBB">string</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">|</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">string</span><span style="color:#D8DEE9FF">[])[]</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">type</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">ResolveMainFields</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">Fields</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">|</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">Record</span><span style="color:#ECEFF4">&lt;</span><span style="color:#8FBCBB">BuilderTarget</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#8FBCBB">Fields</span><span style="color:#ECEFF4">&gt;</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<ul>
<li>Default: <code>undefined</code></li>
</ul>
<p>该配置项将决定你使用 <code>package.json</code> 哪个字段导入 <code>npm</code> 模块。对应 webpack 的 <a href="https://webpack.js.org/configuration/resolve/#resolvemainfields" target="_blank" rel="nofollow">resolve.mainFields</a> 配置。</p>
<h4 id="示例"><a class="header-anchor" aria-hidden="true" href="#示例">#</a>示例</h4>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">resolveMainFields</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">main</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">browser</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">exports</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div>
<h4 id="根据产物类型设置"><a class="header-anchor" aria-hidden="true" href="#根据产物类型设置">#</a>根据产物类型设置</h4>
<p>当你同时构建多种类型的产物时，你可以为不同的产物类型设置不同的 mainFields。此时，你需要把 <code>resolveMainFields</code> 设置为一个对象，对象的 key 为对应的产物类型。</p>
<p>比如为 <code>web</code> 和 <code>node</code> 设置不同的 mainFields：</p>
<div class="language-js"><div class=""></div><div class="modern-code-content"><button class="copy"></button><pre class="shiki" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">default</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">output</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">source</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#88C0D0">resolveMainFields</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#88C0D0">web</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">main</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">browser</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">exports</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">        </span><span style="color:#88C0D0">node</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">main</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">node</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#x27;</span><span style="color:#A3BE8C">exports</span><span style="color:#ECEFF4">&#x27;</span><span style="color:#D8DEE9FF">]</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#D8DEE9FF">      </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">},</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span></code></pre></div></div><!--/$--></div><footer m="t-8"><div flex="~ col sm:row" justify="sm:around" gap="2" p="t-6"><div flex="~ col" class="zPHT1"></div><div flex="~ col" class="oflez"><a class="qVky9 gMyXy oflez" target="" cursor="pointer" href="/builder/guide/introduction.html"><span class="pA5H9">下一页</span><span class="K2e43">介绍</span></a></div></div></footer></div><div class="relative hidden lg:block"><div class="xH_Uj"><div style="min-height:calc(100vh - (var(--modern-nav-height) + 32px))"><div m="l-16"><div flex="~ col" class="max-w-256px"><div class="&lt;lg:hidden"><div p="l-4" text="sm" font-medium="~" id="aside-container" style="border-left:1px solid var(--modern-c-divider-light)" class="relative"><div class="absolute" opacity="0" w="1px" h="18px" bg="brand" style="top:33px;left:-1px;transition:top 0.25s cubic-bezier(0, 1, 0.5, 1), background-color 0.5s, opacity 0.25s" id="aside-marker"></div><div block="~" class="leading-7" text="sm" font="semibold">目录</div><nav><ul class="relative"><li><a href="#sourcealias" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.alias</a></li><li><a href="#sourceinclude" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.include</a></li><li><a href="#sourceexclude" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.exclude</a></li><li><a href="#sourcecompilejsdatauri" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.compileJsDataURI</a></li><li><a href="#sourcedefine" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.define</a></li><li><a href="#sourceglobalvars" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.globalVars</a></li><li><a href="#sourcemodulescopes" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.moduleScopes</a></li><li><a href="#sourcepreentry" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.preEntry</a></li><li><a href="#sourceresolveextensionprefix" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.resolveExtensionPrefix</a></li><li><a href="#sourceresolvemainfields" block="~" text="text-2" font="medium" hover="text-text-1" transition="color duration-300" class="leading-7" style="font-size:13px;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">source.resolveMainFields</a></li></ul></nav></div></div></div></div></div></div></div></div></div></section></div></div></body></html>